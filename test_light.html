<html>
	<head>
		<title>My first three.js app</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>
		<script src="js/three.min.js"></script>
		<script src = "https://threejs.org/examples/js/controls/OrbitControls.js"></script>
		<script>
			var scene = new THREE.Scene();
			var camera = new THREE.PerspectiveCamera( 75, window.innerWidth/window.innerHeight, 0.1, 1000 );
			var mesh;
			var material;
			var renderer = new THREE.WebGLRenderer({ alpha: true });
			renderer.setSize( window.innerWidth, window.innerHeight );
			document.body.appendChild( renderer.domElement );
			renderer.shadowMap.enabled = true;

			var geometry = new THREE.BoxGeometry( 24,32,32 );
			var color = new THREE.Color("#7833aa");
			material = new THREE.MeshPhongMaterial({ color: color.getHex()});
			mesh = new THREE.Mesh(geometry, material);
			mesh.rotation.y = 20
			mesh.castShadow = true
			scene.add(mesh)

			THREE.ImageUtils.crossOrigin = true;
			var textureLoader = new THREE.TextureLoader();
			textureLoader.crossOrigin = true;
			//异步加载
			textureLoader.load('img/carvedlimestoneground1_Base_Color.png',function (texture) {
				//纹理贴图
				material.map = texture
				/*material.needsUpdate需要每帧更新绘制
				*类似的还有geometry.verticesNeedUpdate\elementsNeedUpdate\..
				*mesh的属性无需update
				*/
				material.needsUpdate = true 
				

			})

				//法线贴图
			textureLoader.load('img/carvedlimestoneground1_Normal.png', function (texture) {
				material.normalMap = texture
				material.needsUpdate = true
			})

			var floor = new THREE.Mesh(new THREE.PlaneBufferGeometry(1000, 1000), new THREE.MeshStandardMaterial({ color: 0x6ecccc }));
				floor.rotation.x = -Math.PI / 2;
				floor.position.y = -50;
				floor.receiveShadow = true;
				scene.add(floor);

			var render = function () {
					requestAnimationFrame(render);
					mesh.rotation.x += 0.01;
					renderer.render(scene, camera);
				};
		
            var controls = new THREE.OrbitControls(camera, renderer.domElement);

			var ambientLight = new THREE.AmbientLight(0xffffff, 0.2);
				scene.add(ambientLight);
				
			var pointLight = new THREE.PointLight(0xffffff, 1);
				pointLight.position.set(25, 50, 25);
				pointLight.castShadow = true;
				pointLight.shadow.mapSize.width = 1024;
				pointLight.shadow.mapSize.height = 1024;
				scene.add(pointLight);

            // var light = new THREE.DirectionalLight(0xffffff, 1);
			// light.position.set(0, 1, 0);
			// scene.add(light);

			// var light = new THREE.DirectionalLight(0xffffff, 0.5);
			// light.position.set(0, -1, 0);
			// scene.add(light);

			// var light = new THREE.DirectionalLight(0xffffff, 1);
			// light.position.set(1, 0, 0);
			// scene.add(light);

			// var light = new THREE.DirectionalLight(0xffffff, 0.5);
			// light.position.set(0, 0, 1);
			// scene.add(light);

			// var light = new THREE.DirectionalLight(0xffffff, 1);
			// light.position.set(0, 0, -1);
			// scene.add(light);

			// var light = new THREE.DirectionalLight(0xffffff, 0.5);
			// light.position.set(-1, 0, 0);
			//scene.add(light);
			camera.position.z = 100;
						render();

		</script>
	</body>
</html>